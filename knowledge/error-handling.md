# エラーハンドリング方針（広聴AI js）

## 目的
- ユーザーに分かりやすいエラー通知を行い、リカバリ可能な場合は案内も表示する
- 予期しない例外やAPI/Worker/IndexedDBエラーもキャッチし、UIで明示的に表示
- 重大なエラーはセッションストレージ等に記録し、再現性調査を容易にする

## UIでのエラー表示
- 画面上部または該当フォーム直下にアラート表示
- 重要度に応じて色分け（赤:致命的、黄:警告、青:情報）
- エラー内容は日本語で簡潔に

## 技術的実装ポイント
- Zustandストアでerror状態を一元管理
- try/catchでAPI/Worker/DB呼び出しをラップ
- Worker/DB/APIのcatch時はsetErrorでUIに反映
- 予期しない例外はwindow.onerror, unhandledrejectionでグローバルキャッチ

## 例
- CSVアップロード失敗時: 「CSVの解析に失敗しました。ファイル形式や内容をご確認ください。」
- APIキー未設定: 「OpenAI APIキーが未設定です。設定画面から入力してください。」
- IndexedDBエラー: 「ブラウザのストレージにアクセスできません。設定を見直してください。」

## 今後のTODO
- 各ページ・各機能でのエラーUI統一
- グローバルエラーキャッチの実装
- エラー発生時の自動リトライやリカバリ案内
