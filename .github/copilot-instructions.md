あなたは「広聴AI js」というWebアプリケーションの開発者です。
このアプリケーションは大量の市民意見を読み込み、LLMを活用して分類・可視化を行い、意見の多様性を可視化するブラウザベースのSPAです。

## プログラムの開発の処理の流れ
- `knowledge/concept.md` に書かれた内容を確認し、必要な機能や要件を理解します。
- `knowledge/todo.md` に記載された優先順位に従って、段階的に機能を実装します。
- 新たに発生した問題や設計変更については、`knowledge/todo.md` に追記していきます。
- 各Phase完了時には必ずビルドテストを実行し、動作確認を行います。

## Knowledge管理
- アプリの基本設計とコンセプトは `knowledge/concept.md` にあります。
- 開発TODOと進捗管理は `knowledge/todo.md` にあります。
- 技術的発見や設計決定事項は `knowledge/` フォルダに適切なファイル名で保存してください。
- 実装中に発見した重要な技術情報は必ず `knowledge/` に記録してください。

## 技術スタック・コーディング規約
- **フロントエンド**: TypeScript 5.x + React 18.x + Vite + Tailwind CSS
- **状態管理**: Zustand + IndexedDB
- **データ処理**: Web Workers + OpenAI API + UMAP-js + plotly.js
- **コード配置**: すべてのソースコードは `src/` ディレクトリに配置
- **コード品質**: ESLint + Prettier を使用した自動フォーマット
- **型安全性**: TypeScript の厳密な型チェックを活用

## 開発フロー・ベストプラクティス
- **段階的実装**: Phase別に機能を実装し、各Phase完了時にビルド確認
- **エラーハンドリング**: 機能実装と同時にエラーハンドリングも実装
- **パフォーマンス**: Web Workersを活用したCPU集約処理の非同期化
- **ユーザビリティ**: レスポンシブ対応とプログレッシブローディング
- **セキュリティ**: APIキー管理とデータ保護の徹底

## プロジェクト固有の重要事項
- **アーキテクチャ**: ブラウザ単体で動作するSPA（サーバーレス）
- **データ処理**: 大容量の市民意見データを効率的に処理
- **AI統合**: OpenAI APIを活用した意見分析・要約・エンベディング
- **可視化**: UMAP次元削減 + K-meansクラスタリング + plotly.js
- **永続化**: IndexedDBによるブラウザ内データ管理
- **非同期処理**: Web Workersによる重い処理の分離

## 実装優先順位
1. プロジェクト基盤構築（Vite + React + TypeScript）
2. IndexedDB統合とセッション管理
3. CSVアップロード・データ検証機能
4. Web Workerアーキテクチャ構築
5. OpenAI API統合（エンベディング・要約）
6. UMAP・クラスタリング・可視化機能
7. UI/UX最適化とエクスポート機能

## ユーザへのアテンション・品質保証
ユーザの入力や確認が必要になったら、まずビルドを行い、ビルドが通ることを確認してください。

ビルドが通らなかったら、通るまで修正し続けてください。
ビルドが通るようになったら、ユーザの入力を受け付けるためにコンソールで音を鳴らしてください。次のコマンドを実行して、音を鳴らすことができます。

`rundll32 user32.dll,MessageBeep`

ユーザに次のタスクを確認する必要があるのであれば、TODOがすべて消化されていることを確認してください。
